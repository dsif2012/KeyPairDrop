{
  "rules": {
    "rooms": {
      "$roomId": {
        // 房間 ID 必須是 6 位大寫字母數字（A-Z, 2-9，排除容易混淆的字元）
        ".validate": "newData.hasChildren(['created']) && $roomId.matches(/^[A-Z2-9]{6}$/)",
        
        // 房間創建時間戳
        "created": {
          ".validate": "newData.isNumber() && newData.val() > 0 && newData.val() <= now",
          ".write": true
        },
        
        // 客戶端信令（接收端寫入，主機端讀取）
        "clientSignal": {
          ".validate": "newData.isString() && newData.val().length < 5000",
          ".write": true,
          ".read": true
        },
        
        // 主機端信令（主機端寫入，接收端讀取）
        "hostSignal": {
          ".validate": "newData.isString() && newData.val().length < 5000",
          ".write": true,
          ".read": true
        },
        
        // 允許讀取整個房間數據
        ".read": true,
        
        // 允許寫入（創建房間和信令）
        ".write": true,
        
        // 房間數據大小限制（防止濫用）
        "$other": {
          ".validate": false
        }
      },
      
      // 防止在 rooms 根目錄寫入
      ".write": false,
      ".read": true
    },
    
    // 其他路徑禁止訪問
    "$other": {
      ".read": false,
      ".write": false
    }
  }
}

